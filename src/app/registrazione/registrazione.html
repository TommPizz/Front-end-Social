<div class="registrazione-container">
  <!-- Bottone indietro -->
  <a href="/preview" class="back-button">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    <span>Indietro</span>
  </a>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <!-- Logo -->
    <div class="logo-container">
      <img src="images/logo-itsocial.png" alt="Logo" class="registration-logo">
    </div>
    
    <!-- Titolo -->
    <h2>Registrati</h2>

    <!-- Campo Nome -->
    <div class="form-group">
      <label>Nome</label>
      <input 
        formControlName="nome" 
        type="text" 
        placeholder="Inserisci il tuo nome"
        [class.input-error]="getErrore('nome')" />
      <span class="error-message" *ngIf="getErrore('nome')">
        {{ getErrore('nome') }}
      </span>
    </div>

    <!-- Campo Cognome -->
    <div class="form-group">
      <label>Cognome</label>
      <input 
        formControlName="cognome" 
        type="text" 
        placeholder="Inserisci il tuo cognome"
        [class.input-error]="getErrore('cognome')" />
      <span class="error-message" *ngIf="getErrore('cognome')">
        {{ getErrore('cognome') }}
      </span>
    </div>

    <!-- Campo Username -->
    <div class="form-group">
      <label>Username</label>
      <input 
        formControlName="username" 
        type="username" 
        [class.input-error]="getErrore('username')" />
      <span class="error-message" *ngIf="getErrore('username')">
        {{ getErrore('username') }}
      </span>
    </div>

    <!-- Campo Password -->
    <div class="form-group">
      <label>Password</label>
      <input 
        formControlName="password" 
        type="password" 
        placeholder="Minimo 8 caratteri"
        [class.input-error]="getErrore('password')" />
      <span class="error-message" *ngIf="getErrore('password')">
        {{ getErrore('password') }}
      </span>
    </div>

    <!-- Campo Codice Fiscale -->
    <div class="form-group">
      <label>Codice Fiscale</label>
      <input 
        formControlName="codiceFiscale" 
        type="text" 
        placeholder="16 caratteri (es. RSSMRA80A01H501U)"
        maxlength="16"
        [class.input-error]="getErrore('codiceFiscale')"
        style="text-transform: uppercase;" />
      <!-- ðŸ‘‡ QUESTO MOSTRA L'ERRORE -->
      <span class="error-message" *ngIf="getErrore('codiceFiscale')">
        {{ getErrore('codiceFiscale') }}
      </span>
    </div>

    <!-- Bottone Submit -->
    <button type="submit" [disabled]="loading">
      {{ loading ? 'Registrazione...' : 'Registrati' }}
    </button>
  </form>

  <!-- Messaggio errore generale -->
  <p class="error-general" *ngIf="errorMessage">{{ errorMessage }}</p>
</div>